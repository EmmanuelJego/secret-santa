<!DOCTYPE html>
<html lang="fr">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Père Noël Secret</title>

      <!-- Custom CSS -->
      <link href="./style.css" rel="stylesheet">

      <!-- Bootstrap -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

      <!-- Poppins font -->
      <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet"/>

      <!-- Vue.js -->
      <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

      <!-- Lottie -->
      <script src="https://unpkg.com/@lottiefiles/lottie-interactivity@latest/dist/lottie-interactivity.min.js"></script>
  </head>

  <body>
    <div id="app" class="text-center">
      <h4 class="mb-4 text-white">
        Père Noël Secret 🎅🏻
      </h4>
      <div class="card">
        <div class="card-body text-center">
          <div v-show="!selectedMember">
            <h5>
              Tu es...
            </h5>
            <div class="mb-3">
              (on ne triche pas !)
            </div>
            <div id="member-select" >
              <button type="button" class="btn btn-light btn-lg" v-for="member in members" @click="select(member)">{{ member }}</button>
            </div>
          </div>
          <div v-show="selectedMember && wheelAnimating">
            <iframe src="https://lottie.host/embed/8e29a625-b5d4-4337-b162-d0b760d1003c/3gfIPdSGUb.json"></iframe>
          </div>
          <div v-show="selectedMember && !wheelAnimating">
            <b>{{selectedMember}}</b>, tu offres un cadeau à...
            <h4 class="mt-3">
              {{ tirage[selectedMember] }}
            </h4>
            <iframe src="https://lottie.host/embed/db05d194-a921-4b51-b50c-91a364f8af46/Yt5l4YhpFH.json"></iframe>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<script>
  const { createApp } = Vue

  createApp({
    data() {
      return {
        tirage: {
          Allan: 'Stéphanie',
          Anthony: 'Christophe',
          Babeth: 'Eva',
          Chloé: 'Anthony',
          Christophe: 'Inès',
          Coralie: 'Babeth',
          Eva: 'Lilian',
          Gwendal: 'Katell',
          Inès: 'Coralie',
          Jacqueline: 'Laurence',
          Katell: 'Naima',
          Laurent: 'Allan',
          Lilian: 'Jacqueline',
          Naima: 'Chloé',
          Stéphanie: 'Gwendal',
          Laurence: 'Mamie',
          Mamie: 'Laurent',
        },
        selectedMember: undefined,
        wheelAnimating: false,
      }
    },
    computed: {
      members() {
        return Object.keys(this.tirage).sort()
      }
    },
    mounted() {},
    methods: {
      select(member) {
        this.selectedMember = member
        this.wheelAnimating = true

        setTimeout(() => {
          this.wheelAnimating = false
        }, 6000)
      }
    }
  }).mount('#app')
</script>
